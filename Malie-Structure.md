# Malie-Structure
Malie 엔진에서 사용되는 데이터 파일의 구조에 대한 설명입니다.\
리버싱을 통해서 알아낸 정보이기 때문에, 부정확한 정보가 있을 수 있습니다.

## 암호화/복호화
[Camellia-128](https://en.wikipedia.org/wiki/Camellia_(cipher)) 알고리즘을 사용하여 데이터 파일의 복호화를 진행합니다.\
복호화에 사용되는 키는 동적 디버깅을 통해서 알 수 있습니다.\
 
 ## 파일 구조
 아래 이미지는 복호화가 끝난 상주전신관학원 팔명진의 .dat 파일입니다.\
![image](https://user-images.githubusercontent.com/20679212/145761063-bd5c9759-41a0-496f-a6d3-0b442b0402ad.png)\
 파일의 처음 0x30 바이트는 LIBP 헤더입니다. 매직넘버(4) + Entry개수(4) + 파일개수(4)로 구성되어있습니다.\
 Entry는 폴더/파일을 모두 포함하는 단어로 제가 임의로 지정했습니다.\
 Entry는 0x20 의 사이즈를 가지며 Ansi String 형태의 이름,파일인지 여부,오프셋(자식의 오프셋),사이즈(자식의 개수)가 포함되어있습니다.\
 Entry의 0x16 바이트가 1일 경우 해당 엔트리는 파일로 취급됩니다. 파일로 취급되는 엔트리는 0x18,0x1C 에 해당하는 4바이트 정수값이\
 각각 오프셋과 파일의 사이즈에 대응됩니다. 파일로 취급되지 않는 Entry의 경우에는 자식들의 오프셋, 자식의 개수에 해당됩니다.
